(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{113:function(e,t){},115:function(e,t){},148:function(e,t){},149:function(e,t){},195:function(e,t,a){var n={"./0.jpg":196,"./1.jpg":197,"./10.jpg":198,"./11.jpg":199,"./12.jpg":200,"./13.jpg":201,"./14.jpg":202,"./15.jpg":203,"./16.jpg":204,"./2.jpg":205,"./3.jpg":206,"./4.jpg":207,"./5.jpg":208,"./6.jpg":209,"./7.jpg":210,"./8.jpg":211,"./9.jpg":212,"./banner.jpg":213,"./hand.jpg":214};function i(e){var t=o(e);return a(t)}function o(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=195},196:function(e,t,a){e.exports=a.p+"static/media/0.401840ba.jpg"},197:function(e,t,a){e.exports=a.p+"static/media/1.401840ba.jpg"},198:function(e,t,a){e.exports=a.p+"static/media/10.9621bbbc.jpg"},199:function(e,t,a){e.exports=a.p+"static/media/11.c238e436.jpg"},200:function(e,t,a){e.exports=a.p+"static/media/12.973b8ab8.jpg"},201:function(e,t,a){e.exports=a.p+"static/media/13.728701d2.jpg"},202:function(e,t,a){e.exports=a.p+"static/media/14.9ef2f1c4.jpg"},203:function(e,t,a){e.exports=a.p+"static/media/15.1f5880d6.jpg"},204:function(e,t,a){e.exports=a.p+"static/media/16.401840ba.jpg"},205:function(e,t,a){e.exports=a.p+"static/media/2.2de0d22a.jpg"},206:function(e,t,a){e.exports=a.p+"static/media/3.0fef6bcf.jpg"},207:function(e,t,a){e.exports=a.p+"static/media/4.0d13a8b0.jpg"},208:function(e,t,a){e.exports=a.p+"static/media/5.ca8bdcab.jpg"},209:function(e,t,a){e.exports=a.p+"static/media/6.41988fc1.jpg"},210:function(e,t,a){e.exports=a.p+"static/media/7.00ef4aaf.jpg"},211:function(e,t,a){e.exports=a.p+"static/media/8.c04fb220.jpg"},212:function(e,t,a){e.exports=a.p+"static/media/9.e641a945.jpg"},213:function(e,t,a){e.exports=a.p+"static/media/banner.275e0e05.jpg"},214:function(e,t,a){e.exports=a.p+"static/media/hand.f39313f7.jpg"},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),o=a(91),c=a.n(o),s=a(6),r=a(7),l=a(11),d=a(10),m=a(12),u=a(220),h=a(96),p=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"headerbox pad20 "},i.a.createElement("div",{className:"bx--type-mega"},"Handtrack.js"),i.a.createElement("span",{className:"lighttext"}," A library for prototyping realtime handtracking in the browser. [",i.a.createElement("a",{href:"https://github.com/victordibia/handtrack.js/"},"Github"),"]"),i.a.createElement("br",null))}}]),t}(n.Component),g=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,"Made with ",i.a.createElement("span",{className:"redcolor"},"\u2665")," by ",i.a.createElement("a",{href:"https://twitter.com/vykthur",target:"blank"},"Victor Dibia"),". Designed using  ",i.a.createElement("a",{href:"http://carbondesignsystem.com",target:"blank"},"Carbon Design System."))}}]),t}(n.Component),v=a(221),f=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"sidebarcontent"},i.a.createElement("div",{className:"sidebartitle"},i.a.createElement("span",{className:"bx--type-epsilon"}," handtrack.js "),i.a.createElement("span",{className:"lighttext"}," ")),i.a.createElement("div",{className:"lighttext"},"v0.0.6"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("div",{className:"sidebarlinks"},i.a.createElement(v.a,{exact:!0,to:"/"},"demo")),i.a.createElement("div",{className:"sidebarlinks"},i.a.createElement(v.a,{to:"/about"},"about")))}}]),t}(n.Component),b=a(219),y=a(22),E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={modelParams:{scoreThreshold:.7,flipHorizontal:!1},model:null,modelLoaded:!1,videoPlayStatus:!1,showHighlight:!1,highlightText:"Attention needed"},a.canvas=i.a.createRef(),a.videoButton=i.a.createRef(),a.imgHolder=i.a.createRef(),a.video=i.a.createRef(),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.video.current.width=450,this.video.current.height=380,this.canvasContext=this.canvas.current.getContext("2d"),this.drawCenter=!0,y.a(this.state.modelParams).then(function(t){e.setState({model:t}),e.setState({modelLoaded:!0}),document.getElementsByClassName("handimagebox")[0].click()})}},{key:"runDetection",value:function(e){var t=this,a=this;this.state.model.detect(e).then(function(n){t.canvas.current&&(t.state.model.renderPredictions(n,t.canvas.current,t.canvasContext,e),t.state.videoPlayStatus&&e&&window.requestAnimationFrame(function(){a.runDetection(e)}))})}},{key:"detectImage",value:function(e){this.imgHolder.current.height=380,this.imgHolder.current.src=e.src,this.runDetection(this.imgHolder.current)}},{key:"updateConfidence",value:function(e){var t=this.state.modelParams;t.scoreThreshold=e.target.value/100,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams);var a=document.getElementsByClassName("handimageselected")[0];!this.state.videoPlayStatus&&a&&a.click()}},{key:"videoButtonClick",value:function(e){var t=this;this.state.videoPlayStatus?(this.setState({videoPlayStatus:!1}),y.c()):y.b(this.video.current).then(function(e){e?(t.setState({videoPlayStatus:!0}),t.runDetection(t.video.current)):(console.log("Camera not available"),t.setState({highlightText:"Please enable camera to use video detection"}),t.setState({showHighlight:!0}),setTimeout(function(){t.setState({showHighlight:!1})},6e3))})}},{key:"flipImageCheck",value:function(e){var t=this.state.modelParams;t.flipHorizontal=e.target.checked,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams),console.log(this.state)}},{key:"clickImage",value:function(e){for(var t=document.getElementsByClassName("handimagebox"),a=0;a<t.length;a++)t[a].classList.remove("handimageselected");if(e.target.classList.add("handimageselected"),this.state.videoPlayStatus){var n=this,i=e.target;document.getElementById("videobutton").click(),setTimeout(function(){n.detectImage(i)},200)}else this.detectImage(e.target)}},{key:"render",value:function(){var e=this,t=Array.from(Array(16).keys()).map(function(t){return i.a.createElement("img",{key:t,onClick:e.clickImage.bind(e),src:a(195)("./".concat(t,".jpg")),alt:"",className:"handimagebox"})});return i.a.createElement("div",{className:""},i.a.createElement("div",{className:"pagetitle"},"Demo"),i.a.createElement("br",null),this.state.modelLoaded?null:i.a.createElement(j,null),i.a.createElement("div",{className:"clickable"},i.a.createElement("div",{className:this.state.modelLoaded?"hidden":"disableoverlay"}),i.a.createElement("div",{className:this.state.showHighlight?"orangehighlight mb10":"hidden"}," ",this.state.highlightText),i.a.createElement("div",{className:"bluehightlight mb10"},"All detection is done in the browser! ",i.a.createElement("span",{className:"lighttext"}," Click on an image or  Start video")),i.a.createElement("div",null,i.a.createElement(b.a,{id:"videobutton",onClick:this.videoButtonClick.bind(this)},"  ",this.state.videoPlayStatus?"\u25a9 Stop Video Detection":" \u25b6 \ufe0f Start Video Detection"," "),i.a.createElement("div",{className:"bx--form-item bx--checkbox-wrapper  flipimagecheckbox"},i.a.createElement("input",{onClick:this.flipImageCheck.bind(this),id:"flipimagecheckbox",className:"bx--checkbox",type:"checkbox",value:"new",name:"checkbox"}),i.a.createElement("label",{htmlFor:"flipimagecheckbox",className:"bx--checkbox-label"}," Flip Image "))),i.a.createElement("div",{className:"containerflex mt10"},i.a.createElement("div",{className:"left-half"},i.a.createElement("div",{id:"instruction",className:"lighttext pb10 "},"Modify confidence score threshold."),i.a.createElement("div",{className:"mt10"},i.a.createElement("div",{className:"slidecontainer iblock"},i.a.createElement("input",{type:"range",val:100*this.state.modelParams.scoreThreshold,onChange:this.updateConfidence.bind(this),min:"1",max:"100",className:"slider",id:"confidencerange"})),i.a.createElement("div",{className:"iblock confidencethreshold"},"  ",this.state.modelParams.scoreThreshold," ")),i.a.createElement("div",{className:"scrollholdbox "},t)),i.a.createElement("div",{className:"right-half"},i.a.createElement("canvas",{ref:this.canvas,id:"canvas",className:"canvasbox"})))),i.a.createElement("div",{className:"videoboxes "}),i.a.createElement("img",{ref:this.imgHolder,id:"imgholder",className:"imgholder hidden",src:"",alt:""}),i.a.createElement("video",{ref:this.video,className:"videobox",autoPlay:"autoplay",id:"myvideo"}))}}]),t}(n.Component),j=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"mb10"},i.a.createElement("div",{"data-loading":!0,className:"iblock bx--loading bx--loading--small"},i.a.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},i.a.createElement("title",null,"Loading"),i.a.createElement("circle",{cx:"0",cy:"0",r:"37.5"}))),i.a.createElement("div",{className:"iblock loadingtitle"}," Loading Handtrack.js model .."))}}]),t}(n.Component),k=E,x=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:""},i.a.createElement("div",{className:"pagetitle"},"About Handtrack.js"),i.a.createElement("br",null),i.a.createElement("div",null,i.a.createElement("div",{className:"bluehightlight mb10"},"Handtrack.js lets you track hand position in an image or video element, right in the browser."),"Underneath, it uses trained Convoluntional Neural Network model (SSD, MobilenetV2 Architecture). Details on how the model was trained can be found  ",i.a.createElement("a",{rel:"noopener noreferrer",href:"https://medium.com/@victor.dibia/how-to-build-a-real-time-hand-detector-using-neural-networks-ssd-on-tensorflow-d6bac0e4b2ce",target:"_blank"},"here")," ."))}}]),t}(n.Component),N=a(95),w=a.n(N),C={},O=C;C.stopPlanck=function(){},C.startPlanck=function(){var e=document.body.clientHeight,t=document.body.clientWidth,a=document.getElementById("stage").getBoundingClientRect();console.log(a.top,a.right,a.bottom,a.left),console.log("Window height",e,t);var n=t/10,i=e/10,o=5,c=.7,s=.042*n,r=window.planck,l=new Audio("http://victordibia.com/skyfall/bounce.wav");l.type="audio/wav";var d=!1,m=!1;r.testbed(function(e){var a=r,u=a.Vec2,h=a.World(u(0,-30)),p=4,g=5,v={density:1,restitution:c,userData:{name:"bead",points:3}},f={userData:{name:"paddle"}};e.step=function(e){if(x+=e,h.m_stepCount%80===0&&(console.log("inner tikcoo"),!m)){!function(e){for(var t=0;t<e;++t){var o=h.createBody({type:"dynamic",filterCategoryBits:p,filterMaskBits:g,position:u(a.Math.random(-n/2,n/2),a.Math.random(.5*i,.9*i))}),s=.005,r={fill:"#fff",stroke:"#000000"},l={density:v.density,restitution:c,userData:{name:v.userData.name,points:3}},d=Math.random();d>.8?(r.fill="#32CD32",s=.007,l.userData.points=20):d<.2?(s=.007,r.fill="#ff0000",l.userData.points=-10):(r.fill="#fff",s=.007,l.userData.points=10);var m=a.Circle(n*s);o.createFixture(m,l),o.render=r,o.dieTime=x+N,j.push(o)}}(o);for(var t=0;t!==j.length;t++){var s=j[t];s.dieTime<=x&&(j.splice(t,1),h.destroyBody(s),t--)}}(function(e){var t=e.getPosition();t.x=w(t.x,-n/2,n/2),t.y=w(t.y,-i/2,i/2),e.setPosition(t)})(b),k.forEach(function(e,t,a){!function(e){var t=e.getPosition();t.x<-n/2?(t.x=-n/2,e.setPosition(t)):t.x>n/2&&(t.x=n/2,e.setPosition(t))}(e.paddle)})},e.width=n,e.height=i;var b,y=[0,t],E=[-n/2,n/2],j=[],k=new Map,x=0,N=6e3;function w(e,t,a){return"undefined"===typeof t?(a=1,t=0):"undefined"===typeof a&&(a=t,t=0),a>t?(e=(e-t)%(a-t))+(e<0?a:t):(e=(e-a)%(t-a))+(e<=0?t:a)}return function(){b=h.createBody({type:"kinematic",filterCategoryBits:g,filterMaskBits:p,position:u(-.4*n/2,-.28*i)});var e=.03*n,t=[];[[1.8,-.1],[1.8,.1],[1.2,.4],[.4,.6],[-2.4,.6],[-3.2,.4],[-3.8,.1],[-3.8,-.1]].forEach(function(a){t.push(u(e*a[0],e*a[1]))}),b.createFixture(a.Polygon(t),f),b.render={fill:"#ff8800",stroke:"#000000"}}(),document.getElementById("stage").addEventListener("mousemove",function(e){var t;e.preventDefault(),"touchmove"===e.type?t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]:"touchstart"===e.type?t=e.targetTouches[0]:"mousemove"===e.type&&(t=e),function(e){if(!m){var t=function(e,t,a){if(e<t[0]||e>t[1])return NaN;var n=t[1]-t[0],i=a[1]-a[0];return(e-t[0])*i/n+a[0]}(e.clientX,y,E);if(!isNaN(t)){var a=u((t-b.getPosition().x)*s,0);b.setLinearVelocity(a)}}}(t)}),document.onkeyup=function(e){var t=e.keyCode?e.keyCode:e.which;32===t&&(console.log("spacebar pressed"),m=!m)},h.on("pre-solve",function(e){var t=e.getFixtureA(),a=e.getFixtureB(),n=!1,i=!1;if(t.getUserData()&&(n=t.getUserData().name=f.userData.name),a.getUserData()&&(i=a.getUserData().name=f.userData.name),n||i){var o=n?a:t;setTimeout(function(){!function(e,t){n=l,d&&n.play(),a=t.getUserData().points,m||a;var a;var n}(0,o)},1)}}),h})};var S=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"mb10"},i.a.createElement("div",{"data-loading":!0,className:"iblock bx--loading bx--loading--small"},i.a.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},i.a.createElement("title",null,"Loading"),i.a.createElement("circle",{cx:"0",cy:"0",r:"37.5"}))),i.a.createElement("div",{className:"iblock loadingtitle"}," Loading Handtrack.js model .."))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(d.a)(t).call(this,e))).state={canvasWidth:"200",modelParams:{scoreThreshold:.7,flipHorizontal:!0,maxNumBoxes:1},model:null,modelLoaded:!1,videoPlayStatus:!1,showHighlight:!1,highlightText:"Attention needed"},a.canvasRef=i.a.createRef(),a.contentHolder=i.a.createRef(),a.video=i.a.createRef(),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"runDetection",value:function(e){var t=this,a=this;this.state.model.detect(e).then(function(n){if(n[0]){var i=n[0].bbox[0]+n[0].bbox[2]/2;console.log("Predictions: ",e.width,i/e.width)}t.state.videoPlayStatus&&e&&window.requestAnimationFrame(function(){a.runDetection(e)})})}},{key:"componentDidMount",value:function(){var e=this,t=document.body.clientWidth-250;this.canvasRef.current.style.width=t+"px",this.canvasRef.current.style.maxWidth=t+"px";var a=document.documentElement.clientHeight-this.canvasRef.current.getBoundingClientRect().top-100;this.canvasRef.current.style.height=a+"px",console.log("Usable h,w",a,t),y.a(this.state.modelParams).then(function(t){e.setState({model:t}),e.setState({modelLoaded:!0})})}},{key:"videoButtonClick",value:function(e){var t=this;this.state.videoPlayStatus?(this.setState({videoPlayStatus:!1}),y.c()):y.b(this.video.current).then(function(e){console.log("Camera status",e),e?(t.setState({videoPlayStatus:!0}),t.runDetection(t.video.current)):(console.log("Camera not available"),t.setState({highlightText:"Please enable camera to use video detection"}),t.setState({showHighlight:!0}),setTimeout(function(){t.setState({showHighlight:!1})},6e3))})}},{key:"handleScriptCreate",value:function(){this.setState({scriptLoaded:!1})}},{key:"handleScriptError",value:function(){this.setState({scriptError:!0})}},{key:"handleScriptLoad",value:function(){this.setState({scriptLoaded:!0}),O.startPlanck()}},{key:"resizeCanvas",value:function(e){console.log(e.target.width)}},{key:"render",value:function(){return i.a.createElement("div",{className:""},i.a.createElement("div",{ref:this.contentHolder,className:"pagetitle"},"Game Demo"),i.a.createElement("br",null),this.state.modelLoaded?null:i.a.createElement(S,null),i.a.createElement("div",{className:this.state.showHighlight?"orangehighlight mb10":"hidden"}," ",this.state.highlightText),i.a.createElement("div",{className:"clickable"},i.a.createElement("div",{className:this.state.modelLoaded?"hidden":"disableoverlay"}),i.a.createElement("div",{className:"bluehightlight mb10"},"Handtrack.js can be used to prototype natural hand interaction interfaces for games."),i.a.createElement(b.a,{className:"mb10",id:"videobutton",onClick:this.videoButtonClick.bind(this)},"  ",this.state.videoPlayStatus?"\u25a9 Stop Video Detection":" \u25b6 \ufe0f Start Video Detection"," "),i.a.createElement("canvas",{ref:this.canvasRef,className:"gamecanvas",id:"stage"})),i.a.createElement(w.a,{url:"https://cdn.jsdelivr.net/npm/planck-js@0.3.3/dist/planck-with-testbed.js",onCreate:this.handleScriptCreate.bind(this),onError:this.handleScriptError.bind(this),onLoad:this.handleScriptLoad.bind(this)}),i.a.createElement("video",{ref:this.video,className:"videobox",autoPlay:"autoplay",id:"myvideo"}))}}]),t}(n.Component),D=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(u.a,null,i.a.createElement("div",{className:"containerwrap"},i.a.createElement("div",{className:"aside sidebar"},i.a.createElement("div",{id:"sidebar"}," ",i.a.createElement(f,null)," ")),i.a.createElement("div",{className:"aside maincontent"},i.a.createElement("div",{id:"header"},i.a.createElement(p,null)),i.a.createElement("div",{className:"pagecontent bottomcontent pad20"},i.a.createElement(h.a,{exact:!0,path:"/",component:k}),i.a.createElement(h.a,{path:"/about",component:x}),i.a.createElement(h.a,{path:"/demo",component:k}),i.a.createElement(h.a,{path:"/game",component:P})),i.a.createElement("div",{id:"footer"}," ",i.a.createElement(g,null)," "))))}}]),t}(n.Component);a(215),a(216);c.a.render(i.a.createElement(D,null),document.getElementById("root"))},99:function(e,t,a){e.exports=a(217)}},[[99,1,2]]]);
//# sourceMappingURL=main.2c83c872.chunk.js.map