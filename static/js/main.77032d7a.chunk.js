(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{178:function(e,t,a){e.exports=a(457)},192:function(e,t){},194:function(e,t){},226:function(e,t){},227:function(e,t){},273:function(e,t,a){var i={"./0.jpg":274,"./1.jpg":275,"./10.jpg":276,"./11.jpg":277,"./12.jpg":278,"./13.jpg":279,"./14.jpg":280,"./15.jpg":281,"./16.jpg":282,"./2.jpg":283,"./3.jpg":284,"./4.jpg":285,"./5.jpg":286,"./6.jpg":287,"./7.jpg":288,"./8.jpg":289,"./9.jpg":290,"./banner.jpg":291,"./hand.jpg":292};function n(e){var t=o(e);return a(t)}function o(e){var t=i[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id=273},274:function(e,t,a){e.exports=a.p+"static/media/0.401840ba.jpg"},275:function(e,t,a){e.exports=a.p+"static/media/1.71d1d1d3.jpg"},276:function(e,t,a){e.exports=a.p+"static/media/10.9621bbbc.jpg"},277:function(e,t,a){e.exports=a.p+"static/media/11.c238e436.jpg"},278:function(e,t,a){e.exports=a.p+"static/media/12.973b8ab8.jpg"},279:function(e,t,a){e.exports=a.p+"static/media/13.728701d2.jpg"},280:function(e,t,a){e.exports=a.p+"static/media/14.9ef2f1c4.jpg"},281:function(e,t,a){e.exports=a.p+"static/media/15.1f5880d6.jpg"},282:function(e,t,a){e.exports=a.p+"static/media/16.401840ba.jpg"},283:function(e,t,a){e.exports=a.p+"static/media/2.2de0d22a.jpg"},284:function(e,t,a){e.exports=a.p+"static/media/3.0fef6bcf.jpg"},285:function(e,t,a){e.exports=a.p+"static/media/4.0d13a8b0.jpg"},286:function(e,t,a){e.exports=a.p+"static/media/5.ca8bdcab.jpg"},287:function(e,t,a){e.exports=a.p+"static/media/6.41988fc1.jpg"},288:function(e,t,a){e.exports=a.p+"static/media/7.00ef4aaf.jpg"},289:function(e,t,a){e.exports=a.p+"static/media/8.c04fb220.jpg"},290:function(e,t,a){e.exports=a.p+"static/media/9.e641a945.jpg"},291:function(e,t,a){e.exports=a.p+"static/media/banner.275e0e05.jpg"},292:function(e,t,a){e.exports=a.p+"static/media/hand.f39313f7.jpg"},455:function(e,t,a){},456:function(e,t,a){},457:function(e,t,a){"use strict";a.r(t);var i,n,o,s=a(1),l=a.n(s),c=a(172),r=a.n(c),d=a(6),m=a(7),h=a(10),u=a(9),v=a(11),g=a(460),f=a(176),b=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"headerbox pad20 "},l.a.createElement("div",{className:"bx--type-mega"},"Handtrack.js"),l.a.createElement("span",{className:"lighttext"}," A library for prototyping realtime handtracking in the browser. [",l.a.createElement("a",{href:"https://github.com/victordibia/handtrack.js/"},"Github"),"]"),l.a.createElement("br",null))}}]),t}(s.Component),p=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,"Made with ",l.a.createElement("span",{className:"redcolor"},"\u2665")," by ",l.a.createElement("a",{href:"https://twitter.com/vykthur",target:"blank"},"Victor Dibia"),". Designed using  ",l.a.createElement("a",{href:"http://carbondesignsystem.com",target:"blank"},"Carbon Design System."))}}]),t}(s.Component),x=a(461),E=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"sidebarcontent"},l.a.createElement("div",{className:"sidebartitle"},l.a.createElement("span",{className:"bx--type-epsilon"}," handtrack.js "),l.a.createElement("span",{className:"lighttext"}," ")),l.a.createElement("div",{className:"lighttext"},"v0.0.8"),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"sidebarlinks"},l.a.createElement(x.a,{exact:!0,to:"/"},"demo")),l.a.createElement("div",{className:"sidebarlinks"},l.a.createElement(x.a,{to:"/doodle"},"doodle")),l.a.createElement("div",{className:"sidebarlinks"},l.a.createElement(x.a,{to:"/about"},"about")))}}]),t}(s.Component),y=a(459),k=a(15),C=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={modelParams:{scoreThreshold:.7,flipHorizontal:!1},model:null,modelLoaded:!1,videoPlayStatus:!1,showHighlight:!1,highlightText:"Attention needed"},a.canvas=l.a.createRef(),a.videoButton=l.a.createRef(),a.imgHolder=l.a.createRef(),a.video=l.a.createRef(),a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){console.log("Page unmounting disposing model"),this.state.model.dispose()}},{key:"componentDidMount",value:function(){var e=this;this.video.current.width=450,this.video.current.height=380,this.canvasContext=this.canvas.current.getContext("2d"),this.drawCenter=!0,k.a(this.state.modelParams).then(function(t){e.setState({model:t}),e.setState({modelLoaded:!0}),document.getElementsByClassName("handimagebox")[0].click()})}},{key:"runDetection",value:function(e){var t=this,a=this;this.state.model.detect(e).then(function(i){t.canvas.current&&(t.state.model.renderPredictions(i,t.canvas.current,t.canvasContext,e),t.state.videoPlayStatus&&e&&window.requestAnimationFrame(function(){a.runDetection(e)}))})}},{key:"detectImage",value:function(e){this.imgHolder.current.height=380,this.imgHolder.current.src=e.src,this.runDetection(this.imgHolder.current)}},{key:"updateConfidence",value:function(e){var t=this.state.modelParams;t.scoreThreshold=e.target.value/100,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams);var a=document.getElementsByClassName("handimageselected")[0];!this.state.videoPlayStatus&&a&&a.click()}},{key:"videoButtonClick",value:function(e){var t=this;this.state.videoPlayStatus?(this.setState({videoPlayStatus:!1}),k.c()):k.b(this.video.current).then(function(e){e?(t.setState({videoPlayStatus:!0}),t.runDetection(t.video.current)):(console.log("Camera not available"),t.setState({highlightText:"Please enable camera to use video detection"}),t.setState({showHighlight:!0}),setTimeout(function(){t.setState({showHighlight:!1})},6e3))})}},{key:"flipImageCheck",value:function(e){var t=this.state.modelParams;t.flipHorizontal=e.target.checked,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams),console.log(this.state)}},{key:"clickImage",value:function(e){for(var t=document.getElementsByClassName("handimagebox"),a=0;a<t.length;a++)t[a].classList.remove("handimageselected");if(e.target.classList.add("handimageselected"),this.state.videoPlayStatus){var i=this,n=e.target;document.getElementById("videobutton").click(),setTimeout(function(){i.detectImage(n)},200)}else this.detectImage(e.target)}},{key:"render",value:function(){var e=this,t=Array.from(Array(16).keys()).map(function(t){return l.a.createElement("img",{key:t,onClick:e.clickImage.bind(e),src:a(273)("./".concat(t,".jpg")),alt:"",className:"handimagebox"})});return l.a.createElement("div",{className:""},l.a.createElement("div",{className:"pagetitle"},"Demo"),l.a.createElement("br",null),this.state.modelLoaded?null:l.a.createElement(N,null),l.a.createElement("div",{className:"clickable"},l.a.createElement("div",{className:this.state.modelLoaded?"hidden":"disableoverlay"}),l.a.createElement("div",{className:this.state.showHighlight?"orangehighlight mb10":"hidden"}," ",this.state.highlightText),l.a.createElement("div",{className:"bluehightlight mb10"},"All detection is done in the browser! ",l.a.createElement("span",{className:"lighttext"}," Click on an image or  Start video")),l.a.createElement("div",null,l.a.createElement(y.a,{id:"videobutton",onClick:this.videoButtonClick.bind(this)},"  ",this.state.videoPlayStatus?"\u25a9 Stop Video Detection":" \u25b6 \ufe0f Start Video Detection"," "),l.a.createElement("div",{className:"bx--form-item bx--checkbox-wrapper  flipimagecheckbox"},l.a.createElement("input",{onClick:this.flipImageCheck.bind(this),id:"flipimagecheckbox",className:"bx--checkbox",type:"checkbox",value:"new",name:"checkbox"}),l.a.createElement("label",{htmlFor:"flipimagecheckbox",className:"bx--checkbox-label"}," Flip Image "))),l.a.createElement("div",{className:"flex mt10"},l.a.createElement("div",{className:"flexfull"},l.a.createElement("div",{id:"instruction",className:"lighttext pb10 "},"Modify confidence score threshold."),l.a.createElement("div",{className:"mt10 flex  mr20 "},l.a.createElement("div",{className:"slidecontainer flexfull  "},l.a.createElement("input",{type:"range",val:100*this.state.modelParams.scoreThreshold,onChange:this.updateConfidence.bind(this),min:"1",max:"100",className:"slider",id:"confidencerange"})),l.a.createElement("div",{className:"iblock confidencethreshold "},"  ",this.state.modelParams.scoreThreshold," ")),l.a.createElement("div",{className:"bluehightlight mb10 lh10 mr20"},"Detection not working as expected? Change the confidence threshold value. The right threshold may depend on your ",l.a.createElement("span",{className:"boldtext"},"camera"),"  and ",l.a.createElement("span",{className:"boldtext"},"lighting"),"   conditions."),l.a.createElement("div",{className:"scrollholdbox "},t)),l.a.createElement("div",{className:"flex5 "},l.a.createElement("canvas",{ref:this.canvas,id:"canvas",className:"canvasbox"})))),l.a.createElement("div",{className:"videoboxes "}),l.a.createElement("img",{ref:this.imgHolder,id:"imgholder",className:"imgholder hidden",src:"",alt:""}),l.a.createElement("video",{ref:this.video,className:"videobox hidden",autoPlay:"autoplay",id:"myvideo"}))}}]),t}(s.Component),N=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"mb10"},l.a.createElement("div",{"data-loading":!0,className:"iblock bx--loading bx--loading--small"},l.a.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},l.a.createElement("title",null,"Loading"),l.a.createElement("circle",{cx:"0",cy:"0",r:"37.5"}))),l.a.createElement("div",{className:"iblock loadingtitle"}," Loading Handtrack.js model .."))}}]),t}(s.Component),j=C,P=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:""},l.a.createElement("div",{className:"pagetitle"},"About Handtrack.js"),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("div",{className:"bluehightlight mb10"},"Handtrack.js lets you track hand position in an image or video element, right in the browser."),l.a.createElement("div",{className:"lh10"},"Underneath, it uses trained Convoluntional Neural Network model (SSD, MobilenetV2 Architecture). Details on how the model was trained can be found  ",l.a.createElement("a",{rel:"noopener noreferrer",href:"https://medium.com/@victor.dibia/how-to-build-a-real-time-hand-detector-using-neural-networks-ssd-on-tensorflow-d6bac0e4b2ce",target:"_blank"},"here")," .")))}}]),t}(s.Component),w={},S=w,D=0;w.stopPlanck=function(){},w.setGamex=function(e){D=e;var t=n((e-i.getPosition().x)*o,0);i.setLinearVelocity(t)},w.startPlanck=function(){var e=document.body.clientHeight,t=document.body.clientWidth,a=document.getElementById("stage").getBoundingClientRect();console.log(a.top,a.right,a.bottom,a.left),console.log("Window height",e,t);var s=t/10,l=e/10,c=5,r=.7;o=.042*s;var d=window.planck,m=new Audio("http://victordibia.com/skyfall/bounce.wav");m.type="audio/wav";var h=!1,u=!1;d.testbed(function(e){var a=d;n=a.Vec2;var v=a.World(n(0,-30)),g=4,f=5,b={density:1,restitution:r,userData:{name:"bead",points:3}},p={userData:{name:"paddle"}};e.step=function(e){if(C+=e,v.m_stepCount%80===0&&(console.log("inner tikcoo",D),!u)){!function(e){for(var t=0;t<e;++t){var i=v.createBody({type:"dynamic",filterCategoryBits:g,filterMaskBits:f,position:n(a.Math.random(-s/2,s/2),a.Math.random(.5*l,.9*l))}),o=.005,c={fill:"#fff",stroke:"#000000"},d={density:b.density,restitution:r,userData:{name:b.userData.name,points:3}},m=Math.random();m>.8?(c.fill="#32CD32",o=.007,d.userData.points=20):m<.2?(o=.007,c.fill="#ff0000",d.userData.points=-10):(c.fill="#fff",o=.007,d.userData.points=10);var h=a.Circle(s*o);i.createFixture(h,d),i.render=c,i.dieTime=C+N,y.push(i)}}(c);for(var t=0;t!==y.length;t++){var o=y[t];o.dieTime<=C&&(y.splice(t,1),v.destroyBody(o),t--)}}(function(e){var t=e.getPosition();t.x=j(t.x,-s/2,s/2),t.y=j(t.y,-l/2,l/2),e.setPosition(t)})(i),k.forEach(function(e,t,a){!function(e){var t=e.getPosition();t.x<-s/2?(t.x=-s/2,e.setPosition(t)):t.x>s/2&&(t.x=s/2,e.setPosition(t))}(e.paddle)})},e.width=s,e.height=l;var x=[0,t],E=[-s/2,s/2],y=[],k=new Map,C=0,N=6e3;function j(e,t,a){return"undefined"===typeof t?(a=1,t=0):"undefined"===typeof a&&(a=t,t=0),a>t?(e=(e-t)%(a-t))+(e<0?a:t):(e=(e-a)%(t-a))+(e<=0?t:a)}return function(){i=v.createBody({type:"kinematic",filterCategoryBits:f,filterMaskBits:g,position:n(-.4*s/2,-.28*l)});var e=.03*s,t=[];[[1.8,-.1],[1.8,.1],[1.2,.4],[.4,.6],[-2.4,.6],[-3.2,.4],[-3.8,.1],[-3.8,-.1]].forEach(function(a){t.push(n(e*a[0],e*a[1]))}),i.createFixture(a.Polygon(t),p),i.render={fill:"#ff8800",stroke:"#000000"}}(),document.getElementById("stage").addEventListener("mousemove",function(e){var t;e.preventDefault(),"touchmove"===e.type?t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0]:"touchstart"===e.type?t=e.targetTouches[0]:"mousemove"===e.type&&(t=e),function(e){if(!u){var t=function(e,t,a){if(e<t[0]||e>t[1])return NaN;var i=t[1]-t[0],n=a[1]-a[0];return(e-t[0])*n/i+a[0]}(e.clientX,x,E);if(!isNaN(t)){var a=n((t-i.getPosition().x)*o,0);i.setLinearVelocity(a)}}}(t)}),document.onkeyup=function(e){var t=e.keyCode?e.keyCode:e.which;32===t&&(console.log("spacebar pressed"),u=!u)},v.on("pre-solve",function(e){var t=e.getFixtureA(),a=e.getFixtureB(),i=!1,n=!1;if(t.getUserData()&&(i=t.getUserData().name=p.userData.name),a.getUserData()&&(n=a.getUserData().name=p.userData.name),i||n){var o=i?a:t;setTimeout(function(){!function(e,t){a=m,h&&a.play(),t.getUserData().points;var a}(0,o)},1)}}),v})};var O=0,H=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"mb10"},l.a.createElement("div",{"data-loading":!0,className:"iblock bx--loading bx--loading--small"},l.a.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},l.a.createElement("title",null,"Loading"),l.a.createElement("circle",{cx:"0",cy:"0",r:"37.5"}))),l.a.createElement("div",{className:"iblock loadingtitle"}," Loading Handtrack.js model .."))}}]),t}(s.Component),B=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={canvasWidth:"200",modelParams:{scoreThreshold:.7,flipHorizontal:!0,maxNumBoxes:1},model:null,modelLoaded:!1,videoPlayStatus:!1,showHighlight:!1,highlightText:"Attention needed"},a.canvasRef=l.a.createRef(),a.contentHolder=l.a.createRef(),a.video=l.a.createRef(),a.videoCanvasRef=l.a.createRef(),a.videoInterval=200,a.usablecanvasWidth=500,a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"runDetection",value:function(e){var t=this,a=this;this.state.model.detect(e).then(function(i){if(i[0]){var n=i[0].bbox[0]+i[0].bbox[2]/2;O=t.usablecanvasWidth*(n/e.width),S.setGamex(O),console.log("Predictions: ",t.usablecanvasWidth,n/e.width)}t.videoCanvasRef.current&&t.state.model.renderPredictions(i,t.videoCanvasRef.current,t.videoCanvasRef.current.getContext("2d"),e),t.state.videoPlayStatus&&e&&setTimeout(function(){a.runDetection(e)},t.videoInterval)})}},{key:"componentDidMount",value:function(){var e=this,t=document.body.clientWidth-250;this.canvasRef.current.style.width=t+"px",this.canvasRef.current.style.maxWidth=t+"px",this.usablecanvasWidth=t;var a=document.documentElement.clientHeight-this.canvasRef.current.getBoundingClientRect().top-40;this.canvasRef.current.style.height=a+"px",console.log("Usable h,w",a,t),k.a(this.state.modelParams).then(function(t){e.setState({model:t}),e.setState({modelLoaded:!0})}),S.startPlanck()}},{key:"updateConfidence",value:function(e){var t=this.state.modelParams;t.scoreThreshold=e.target.value/100,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams);var a=document.getElementsByClassName("handimageselected")[0];!this.state.videoPlayStatus&&a&&a.click()}},{key:"componentWillUnmount",value:function(){console.log("Page unmounting disposing model"),this.state.model.dispose()}},{key:"videoButtonClick",value:function(e){var t=this;this.state.videoPlayStatus?(this.setState({videoPlayStatus:!1}),k.c()):k.b(this.video.current).then(function(e){console.log("Camera status",e),e?(t.setState({videoPlayStatus:!0}),t.runDetection(t.video.current)):(console.log("Camera not available"),t.setState({highlightText:"Please enable camera to use video detection"}),t.setState({showHighlight:!0}),setTimeout(function(){t.setState({showHighlight:!1})},6e3))})}},{key:"handleScriptCreate",value:function(){this.setState({scriptLoaded:!1})}},{key:"handleScriptError",value:function(){this.setState({scriptError:!0})}},{key:"handleScriptLoad",value:function(){this.setState({scriptLoaded:!0})}},{key:"resizeCanvas",value:function(e){console.log(e.target.width)}},{key:"render",value:function(){return l.a.createElement("div",{className:""},l.a.createElement("div",{ref:this.contentHolder,className:"pagetitle"},"Game Demo"),l.a.createElement("br",null),this.state.modelLoaded?null:l.a.createElement(H,null),l.a.createElement("div",{className:this.state.showHighlight?"orangehighlight mb10":"hidden"}," ",this.state.highlightText),l.a.createElement("div",{className:"clickable"},l.a.createElement("div",{className:this.state.modelLoaded?"hidden":"disableoverlay"}),l.a.createElement("div",{className:"bluehightlight mb10 lh10"},"Control the pong game paddle by waving your hands in front of the camera. Click start video to begin."),l.a.createElement(y.a,{className:"mb10",id:"videobutton",onClick:this.videoButtonClick.bind(this)},"  ",this.state.videoPlayStatus?"\u25a9 Stop Video Control":" \u25b6 \ufe0f Start Video Control"," "),l.a.createElement("div",{className:"flexfull "},l.a.createElement("div",{id:"instruction",className:"lighttext mt10"},"Modify confidence score threshold."),l.a.createElement("div",{className:"mt10 flex"},l.a.createElement("div",{className:"slidecontainer flexfull "},l.a.createElement("input",{type:"range",val:100*this.state.modelParams.scoreThreshold,onChange:this.updateConfidence.bind(this),min:"1",max:"100",className:"slider",id:"confidencerange"})),l.a.createElement("div",{className:"iblock confidencethreshold "},"  ",this.state.modelParams.scoreThreshold," "))),l.a.createElement("canvas",{ref:this.canvasRef,className:"gamecanvas",id:"stage"}),l.a.createElement("canvas",{className:"videocanvasoutput",ref:this.videoCanvasRef,id:"videocanvas"})),l.a.createElement("video",{ref:this.video,className:"videobox hidden",autoPlay:"autoplay",id:"myvideo"}))}}]),t}(s.Component),T=a(67),L=0,M=0,R=0,I=0,A=!1,U=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).handleChangeComplete=function(e){a.setState({doodlecolor:e.hex})},a.state={modelParams:{scoreThreshold:.9,flipHorizontal:!0,maxNumBoxes:1},model:null,modelLoaded:!1,videoPlayStatus:!1,showHighlight:!1,highlightText:"Attention needed",doodlecolor:"#1780DC",saveddoodles:[]},a.canvas=l.a.createRef(),a.videoButton=l.a.createRef(),a.imgHolder=l.a.createRef(),a.video=l.a.createRef(),a.media={width:450,height:380},a.doodlecounter=0,a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){console.log("Page unmounting disposing model"),this.state.model.dispose()}},{key:"componentDidMount",value:function(){var e=this;this.video.current.width=this.media.width,this.video.current.height=this.media.height,L=225,R=190,this.cav=document.getElementById("canvas"),this.cav.width=450,this.cav.height=380,this.canvasContext=this.cav.getContext("2d"),this.DoodleCenter=!0,console.log(this.canvas.current),k.a(this.state.modelParams).then(function(t){e.setState({model:t}),e.setState({modelLoaded:!0}),e.setState({modelLoaded:!0})})}},{key:"runDetection",value:function(e){var t=this,a=this;this.state.model.detect(e).then(function(i){t.canvas.current&&(t.runDrawPredictions(i),t.state.videoPlayStatus&&e&&window.requestAnimationFrame(function(){a.runDetection(e)}))})}},{key:"runDrawPredictions",value:function(e){this.canvasContext.save(),this.state.modelParams.flipHorizontal&&(this.canvasContext.scale(-1,1),this.canvasContext.translate(-this.media.width,0)),this.canvasContext.restore();for(var t=0;t<e.length;t++)L=M,R=I,M=e[t].bbox[0]+e[t].bbox[2]/2,I=e[t].bbox[1]+e[t].bbox[3]/2,this.drawDoodle()}},{key:"drawDoodle",value:function(){this.canvasContext.beginPath(),this.canvasContext.lineWidth=5,this.canvasContext.lineCap="round",this.canvasContext.strokeStyle=this.state.doodlecolor,this.canvasContext.moveTo(L,R),this.canvasContext.lineTo(M,I),this.canvasContext.stroke(),this.canvasContext.closePath()}},{key:"detectImage",value:function(e){this.imgHolder.current.height=380,this.imgHolder.current.src=e.src,this.runDetection(this.imgHolder.current)}},{key:"updateConfidence",value:function(e){var t=this.state.modelParams;t.scoreThreshold=e.target.value/100,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams);var a=document.getElementsByClassName("handimageselected")[0];!this.state.videoPlayStatus&&a&&a.click()}},{key:"videoButtonClick",value:function(e){var t=this;this.state.videoPlayStatus?(this.setState({videoPlayStatus:!1}),k.c()):(this.canvasContext.clearRect(0,0,this.cav.width,this.cav.height),k.b(this.video.current).then(function(e){e?(t.setState({videoPlayStatus:!0}),t.runDetection(t.video.current)):(console.log("Camera not available"),t.setState({highlightText:"Please enable camera to use video detection"}),t.setState({showHighlight:!0}),setTimeout(function(){t.setState({showHighlight:!1})},6e3))}))}},{key:"clearButtonClick",value:function(e){this.doodlecounter++;var t=this.state.saveddoodles;t.push({id:"doodle"+this.doodlecounter,url:this.cav.toDataURL()}),this.setState(t),this.canvasContext.clearRect(0,0,this.cav.width,this.cav.height)}},{key:"clearAllButtonClick",value:function(e){this.setState({saveddoodles:[]})}},{key:"flipImageCheck",value:function(e){var t=this.state.modelParams;t.flipHorizontal=e.target.checked,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams),console.log(this.state)}},{key:"clickDoodle",value:function(e){}},{key:"clickImage",value:function(e){for(var t=document.getElementsByClassName("handimagebox"),a=0;a<t.length;a++)t[a].classList.remove("handimageselected");if(e.target.classList.add("handimageselected"),this.state.videoPlayStatus){var i=this,n=e.target;document.getElementById("videobutton").click(),setTimeout(function(){i.detectImage(n)},200)}else this.detectImage(e.target)}},{key:"canvasMouseDown",value:function(e){A=!0}},{key:"canvasMouseUp",value:function(){A=!1}},{key:"canvasMouseMove",value:function(e){A&&(console.log("dragging"),L=M,R=I,M=e.clientX-this.media.width,I=e.clientY-this.media.height,console.log("dragging",M,I,L,R),this.drawDoodle())}},{key:"canvasMouseOut",value:function(){A=!1}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:""},l.a.createElement("div",{className:"pagetitle"},"Doodle"),l.a.createElement("br",null),this.state.modelLoaded?null:l.a.createElement(W,null),l.a.createElement("div",{className:"clickable "},l.a.createElement("div",{className:this.state.modelLoaded?"hidden":"disableoverlay"}),l.a.createElement("div",{className:this.state.showHighlight?"orangehighlight mb10":"hidden"}," ",this.state.highlightText),l.a.createElement("div",{className:"bluehightlight mb10 lh10"},"Draw interesting doodles by waving your hand in front of the camera. All detection is done in the browser! ",l.a.createElement("span",{className:"lighttext"}," ")),l.a.createElement("div",null,l.a.createElement(y.a,{id:"videobutton",onClick:this.videoButtonClick.bind(this)},"  ",this.state.videoPlayStatus?"\u25a9 Stop Video Doodle":" \u25b6 \ufe0f Start Video Doodle"," "),l.a.createElement("div",{className:"bx--form-item bx--checkbox-wrapper  flipimagecheckbox"},l.a.createElement("input",{onClick:this.flipImageCheck.bind(this),id:"flipimagecheckbox",className:"bx--checkbox",type:"checkbox",value:"new",name:"checkbox"}),l.a.createElement("label",{htmlFor:"flipimagecheckbox",className:"bx--checkbox-label"}," Flip Image "))),l.a.createElement("div",{className:"flex mt10"},l.a.createElement("div",{className:"flex2 mr20  "},l.a.createElement("div",{className:"boldtext mb10"}," Select Doodle Color "),l.a.createElement("div",{style:{backgroundColor:this.state.doodlecolor},className:"doodlecolor mb10 rad3"}),l.a.createElement(T.ChromePicker,{color:this.state.doodlecolor,onChangeComplete:this.handleChangeComplete}),l.a.createElement(y.a,{className:"mt10 width100",id:"clearbutton",onClick:this.clearButtonClick.bind(this)}," Clear Doodle ")),l.a.createElement("div",{className:"flex2 relative"},l.a.createElement("div",{className:"relative"},l.a.createElement("video",{ref:this.video,className:"videobox videoflip",autoPlay:"autoplay",id:"myvideo"}),l.a.createElement("canvas",{onMouseOut:this.canvasMouseOut.bind(this),onMouseMove:this.canvasMouseMove.bind(this),onMouseUp:this.canvasMouseUp.bind(this),onMouseDown:this.canvasMouseDown.bind(this),ref:this.canvas,id:"canvas",className:"canvasbox absolute top left "}))),l.a.createElement("div",{className:"flexfull ml10"},l.a.createElement("div",{className:"flexfull "},l.a.createElement("div",{id:"instruction",className:"lighttext mt10"},"Modify confidence score threshold."),l.a.createElement("div",{className:"mt10 flex"},l.a.createElement("div",{className:"slidecontainer flexfull "},l.a.createElement("input",{type:"range",val:100*this.state.modelParams.scoreThreshold,onChange:this.updateConfidence.bind(this),min:"1",max:"100",className:"slider",id:"confidencerange"})),l.a.createElement("div",{className:"iblock confidencethreshold "},"  ",this.state.modelParams.scoreThreshold," "))),this.state.saveddoodles.length>0&&l.a.createElement(y.a,{className:"mb10 width100",id:"clearAllbutton",onClick:this.clearAllButtonClick.bind(this)},"  Clear All Doodles "),0==this.state.saveddoodles.length&&l.a.createElement("div",{className:"bluehightlight mb10 lh10 mr20"},"Detection not working as expected? Change the confidence threshold value. The right threshold may depend on your ",l.a.createElement("span",{className:"boldtext"},"camera"),"  and ",l.a.createElement("span",{className:"boldtext"},"lighting"),"   conditions."),l.a.createElement("div",{id:"saveddoodlebox"},this.state.saveddoodles.map(function(t){return l.a.createElement("img",{key:t.id,onClick:e.clickDoodle.bind(e),src:t.url,alt:"",className:"doodleimage mr10 mb10 rad3 floatleft"})}))))),l.a.createElement("div",{className:"videoboxes "}),l.a.createElement("img",{ref:this.imgHolder,id:"imgholder",className:"imgholder hidden",src:"",alt:""}))}}]),t}(s.Component),W=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"mb10"},l.a.createElement("div",{"data-loading":!0,className:"iblock bx--loading bx--loading--small"},l.a.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},l.a.createElement("title",null,"Loading"),l.a.createElement("circle",{cx:"0",cy:"0",r:"37.5"}))),l.a.createElement("div",{className:"iblock loadingtitle"}," Loading Handtrack.js model .."))}}]),t}(s.Component),F=U,V=0,_=0,z=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).handleChangeComplete=function(e){a.setState({doodlecolor:e.hex})},a.state={modelParams:{scoreThreshold:.9,flipHorizontal:!0,maxNumBoxes:1},model:null,modelLoaded:!1,videoPlayStatus:!1,showHighlight:!1,highlightText:"Attention needed",doodlecolor:"#1780DC"},a.canvas=l.a.createRef(),a.videoButton=l.a.createRef(),a.imgHolder=l.a.createRef(),a.video=l.a.createRef(),a.media={width:450,height:380},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentWillUnmount",value:function(){console.log("Page unmounting disposing model"),this.state.model.dispose()}},{key:"componentDidMount",value:function(){var e=this;this.video.current.width=450,this.video.current.height=380,V=225,_=190,this.cav=document.getElementById("canvas"),this.cav.width=450,this.cav.height=380,this.canvasContext=this.cav.getContext("2d"),this.DoodleCenter=!0,console.log(this.canvas.current),k.a(this.state.modelParams).then(function(t){e.setState({model:t}),e.setState({modelLoaded:!0}),e.setState({modelLoaded:!0})})}},{key:"runDetection",value:function(e){var t=this,a=this;this.state.model.detect(e).then(function(i){t.canvas.current&&(t.runDrawPredictions(i),t.state.videoPlayStatus&&e&&window.requestAnimationFrame(function(){a.runDetection(e)}))})}},{key:"runDrawPredictions",value:function(e){this.canvasContext.save(),this.state.modelParams.flipHorizontal&&(this.canvasContext.scale(-1,1),this.canvasContext.translate(-this.media.width,0)),this.canvasContext.restore();for(var t=0;t<e.length;t++)this.canvasContext.beginPath(),this.canvasContext.lineWidth=5,this.canvasContext.lineCap="round",this.canvasContext.strokeStyle=this.state.doodlecolor,this.canvasContext.moveTo(V,_),V=e[t].bbox[0]+e[t].bbox[2]/2,_=e[t].bbox[1]+e[t].bbox[3]/2,this.canvasContext.lineTo(V,_),this.canvasContext.stroke(),this.canvasContext.closePath()}},{key:"detectImage",value:function(e){this.imgHolder.current.height=380,this.imgHolder.current.src=e.src,this.runDetection(this.imgHolder.current)}},{key:"updateConfidence",value:function(e){var t=this.state.modelParams;t.scoreThreshold=e.target.value/100,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams);var a=document.getElementsByClassName("handimageselected")[0];!this.state.videoPlayStatus&&a&&a.click()}},{key:"videoButtonClick",value:function(e){var t=this;this.state.videoPlayStatus?(this.setState({videoPlayStatus:!1}),k.c()):(this.canvasContext.clearRect(0,0,this.cav.width,this.cav.height),k.b(this.video.current).then(function(e){e?(t.setState({videoPlayStatus:!0}),t.runDetection(t.video.current)):(console.log("Camera not available"),t.setState({highlightText:"Please enable camera to use video detection"}),t.setState({showHighlight:!0}),setTimeout(function(){t.setState({showHighlight:!1})},6e3))}))}},{key:"clearButtonClick",value:function(e){this.canvasContext.clearRect(0,0,this.cav.width,this.cav.height)}},{key:"flipImageCheck",value:function(e){var t=this.state.modelParams;t.flipHorizontal=e.target.checked,this.setState({modelParams:t}),this.state.model.setModelParameters(this.state.modelParams),console.log(this.state)}},{key:"clickImage",value:function(e){for(var t=document.getElementsByClassName("handimagebox"),a=0;a<t.length;a++)t[a].classList.remove("handimageselected");if(e.target.classList.add("handimageselected"),this.state.videoPlayStatus){var i=this,n=e.target;document.getElementById("videobutton").click(),setTimeout(function(){i.detectImage(n)},200)}else this.detectImage(e.target)}},{key:"render",value:function(){return l.a.createElement("div",{className:""},l.a.createElement("div",{className:"pagetitle"},"Doodle"),l.a.createElement("br",null),this.state.modelLoaded?null:l.a.createElement(G,null),l.a.createElement("div",{className:"clickable "},l.a.createElement("div",{className:this.state.modelLoaded?"hidden":"disableoverlay"}),l.a.createElement("div",{className:this.state.showHighlight?"orangehighlight mb10":"hidden"}," ",this.state.highlightText),l.a.createElement("div",{className:"bluehightlight mb10"},"All detection is done in the browser! ",l.a.createElement("span",{className:"lighttext"}," Click on an image or  Start video")),l.a.createElement("div",null,l.a.createElement(y.a,{id:"videobutton",onClick:this.videoButtonClick.bind(this)},"  ",this.state.videoPlayStatus?"\u25a9 Stop Video Doodle":" \u25b6 \ufe0f Start Video Doodle"," "),l.a.createElement("div",{className:"bx--form-item bx--checkbox-wrapper  flipimagecheckbox"},l.a.createElement("input",{onClick:this.flipImageCheck.bind(this),id:"flipimagecheckbox",className:"bx--checkbox",type:"checkbox",value:"new",name:"checkbox"}),l.a.createElement("label",{htmlFor:"flipimagecheckbox",className:"bx--checkbox-label"}," Flip Image "))),l.a.createElement("div",{className:"flex9 "},l.a.createElement("div",{id:"instruction",className:"lighttext mt10"},"Modify confidence score threshold."),l.a.createElement("div",{className:"mt10 flex"},l.a.createElement("div",{className:"slidecontainer flexfull "},l.a.createElement("input",{type:"range",val:100*this.state.modelParams.scoreThreshold,onChange:this.updateConfidence.bind(this),min:"1",max:"100",className:"slider",id:"confidencerange"})),l.a.createElement("div",{className:"iblock confidencethreshold "},"  ",this.state.modelParams.scoreThreshold," "))),l.a.createElement("div",{className:"flex mt10"},l.a.createElement("div",{className:"flex2 mr20  "},l.a.createElement("div",{className:"boldtext mb10"}," Doodle Color "),l.a.createElement("div",{style:{backgroundColor:this.state.doodlecolor},className:"doodlecolor mb10 rad3"}),l.a.createElement(T.ChromePicker,{color:this.state.doodlecolor,onChangeComplete:this.handleChangeComplete}),l.a.createElement(y.a,{className:"mt10 width100",id:"clearbutton",onClick:this.clearButtonClick.bind(this)},"  Clear Canvas ")),l.a.createElement("div",{className:"flex2 relative"},l.a.createElement("video",{ref:this.video,className:"videobox videoflip",autoPlay:"autoplay",id:"myvideo"}),l.a.createElement("canvas",{ref:this.canvas,id:"canvas",className:"canvasbox absolute top left "})),l.a.createElement("div",{className:"flexfull"}))),l.a.createElement("div",{className:"videoboxes "}),l.a.createElement("img",{ref:this.imgHolder,id:"imgholder",className:"imgholder hidden",src:"",alt:""}))}}]),t}(s.Component),G=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"mb10"},l.a.createElement("div",{"data-loading":!0,className:"iblock bx--loading bx--loading--small"},l.a.createElement("svg",{className:"bx--loading__svg",viewBox:"-75 -75 150 150"},l.a.createElement("title",null,"Loading"),l.a.createElement("circle",{cx:"0",cy:"0",r:"37.5"}))),l.a.createElement("div",{className:"iblock loadingtitle"}," Loading Handtrack.js model .."))}}]),t}(s.Component),q=z,J=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return l.a.createElement(g.a,null,l.a.createElement("div",{className:"containerwrap"},l.a.createElement("div",{className:"aside sidebar"},l.a.createElement("div",{id:"sidebar"}," ",l.a.createElement(E,null)," ")),l.a.createElement("div",{className:"aside maincontent"},l.a.createElement("div",{id:"header"},l.a.createElement(b,null)),l.a.createElement("div",{className:"pagecontent bottomcontent pad20"},l.a.createElement(f.a,{exact:!0,path:"/",component:j}),l.a.createElement(f.a,{path:"/about",component:P}),l.a.createElement(f.a,{path:"/demo",component:j}),l.a.createElement(f.a,{path:"/game",component:B}),l.a.createElement(f.a,{path:"/doodle",component:F}),l.a.createElement(f.a,{path:"/parallax",component:q})),l.a.createElement("div",{id:"footer"}," ",l.a.createElement(p,null)," "))))}}]),t}(s.Component);a(455),a(456);r.a.render(l.a.createElement(J,null),document.getElementById("root"))}},[[178,1,2]]]);
//# sourceMappingURL=main.77032d7a.chunk.js.map